<!DOCTYPE html><html lang="zh"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/3201109276ebe884.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-decb145ea5426c4a.js"/><script src="/_next/static/chunks/4bd1b696-67ee12fb04071d3b.js" async=""></script><script src="/_next/static/chunks/684-f26d66697c31df03.js" async=""></script><script src="/_next/static/chunks/main-app-132297817992e70d.js" async=""></script><script src="/_next/static/chunks/874-9a172bef94aec849.js" async=""></script><script src="/_next/static/chunks/app/error-65e10ec63dfd4efd.js" async=""></script><script src="/_next/static/chunks/app/page-f65e60d494a6c1e6.js" async=""></script><meta name="next-size-adjust" content=""/><title>九局下半</title><meta name="description" content="九局下半的个人博客"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_f367f3"><div hidden=""><!--$--><!--/$--></div><!--$--><main class="min-h-screen p-8 bg-white dark:bg-zinc-900"><div class="max-w-2xl mx-auto"><article><header class="mb-12 text-center"><h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-gray-900 dark:text-white mb-4 leading-tight">SpringBoot单元测试示例</h1><time class="text-gray-500 dark:text-gray-400 font-medium">2025-12-09</time></header><div class="prose prose-lg prose-slate dark:prose-invert mx-auto max-w-none  prose-headings:font-bold prose-headings:tracking-tight prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline prose-img:max-h-96 prose-img:w-auto prose-img:mx-auto prose-img:rounded-lg prose-img:border prose-img:border-gray-200 dark:prose-img:border-zinc-700"><h1>SpringBoot单元测试</h1>
<h2>Maven依赖</h2>
<pre><code class="hljs language-xml">        <span class="hljs-comment">&lt;!-- ========= JUnit5 ========= --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- 排除 junit4，避免冲突 --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ========= Mockito 扩展：Mock 静态方法========= --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mockito<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mockito-inline<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

</code></pre>
<h2>Controller示例</h2>
<pre><code class="hljs language-java">
<span class="hljs-meta">@WebMvcTest(DemoController.class)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoControllerTest</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MockMvc mockMvc;

    <span class="hljs-meta">@MockBean</span>
    <span class="hljs-keyword">private</span> IDemoService demoService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ObjectMapper objectMapper;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetDetail</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Demo</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>();
        demo.setId(<span class="hljs-string">&quot;123&quot;</span>);
        demo.setName(<span class="hljs-string">&quot;测试台账&quot;</span>);

        Mockito.<span class="hljs-keyword">when</span>(demoService.selectDemoById(<span class="hljs-string">&quot;123&quot;</span>))
                .thenReturn(demo);

        mockMvc.perform(get(<span class="hljs-string">&quot;/demo/123&quot;</span>))
                .andExpect(status().isOk())
                .andExpect(jsonPath(<span class="hljs-string">&quot;$.id&quot;</span>).value(<span class="hljs-string">&quot;123&quot;</span>))
                .andExpect(jsonPath(<span class="hljs-string">&quot;$.name&quot;</span>).value(<span class="hljs-string">&quot;测试台账&quot;</span>));
    }


    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAdd</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Demo</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>();
        demo.setName(<span class="hljs-string">&quot;新增测试&quot;</span>);

        Mockito.<span class="hljs-keyword">when</span>(demoService.insertDemo(any()))
                .thenReturn(<span class="hljs-number">1</span>);

        mockMvc.perform(post(<span class="hljs-string">&quot;/demo&quot;</span>)
                .contentType(MediaType.APPLICATION_JSON)
                .content(objectMapper.writeValueAsString(demo)))
                .andExpect(status().isOk())
                .andExpect(jsonPath(<span class="hljs-string">&quot;$.code&quot;</span>).value(<span class="hljs-number">200</span>))
                .andExpect(jsonPath(<span class="hljs-string">&quot;$.data&quot;</span>).value(<span class="hljs-number">1</span>));
    }


    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testEdit</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Demo</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>();
        demo.setId(<span class="hljs-string">&quot;123&quot;</span>);
        demo.setName(<span class="hljs-string">&quot;修改后&quot;</span>);

        Mockito.<span class="hljs-keyword">when</span>(demoService.updateDemo(any()))
                .thenReturn(<span class="hljs-number">1</span>);

        mockMvc.perform(put(<span class="hljs-string">&quot;/demo&quot;</span>)
                .contentType(MediaType.APPLICATION_JSON)
                .content(objectMapper.writeValueAsString(demo)))
                .andExpect(status().isOk())
                .andExpect(jsonPath(<span class="hljs-string">&quot;$.data&quot;</span>).value(<span class="hljs-number">1</span>));
    }


    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        Mockito.<span class="hljs-keyword">when</span>(demoService.deleteDemoById(<span class="hljs-string">&quot;123&quot;</span>))
                .thenReturn(<span class="hljs-number">1</span>);

        mockMvc.perform(delete(<span class="hljs-string">&quot;/demo/123&quot;</span>))
                .andExpect(status().isOk())
                .andExpect(jsonPath(<span class="hljs-string">&quot;$.data&quot;</span>).value(<span class="hljs-number">1</span>));
    }
}
</code></pre>
<h2>Service示例</h2>
<pre><code class="hljs language-java">
<span class="hljs-meta">@ExtendWith(MockitoExtension.class)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoServiceImplTest</span> {

    <span class="hljs-meta">@InjectMocks</span>
    <span class="hljs-keyword">private</span> DemoServiceImpl service;

    <span class="hljs-meta">@Mock</span>
    <span class="hljs-keyword">private</span> DemoMapper mapper;

    <span class="hljs-comment">// mock static</span>
    <span class="hljs-keyword">private</span> MockedStatic&lt;DateUtils&gt; dateUtilsMock;
    <span class="hljs-keyword">private</span> MockedStatic&lt;SecurityUtils&gt; securityUtilsMock;
    <span class="hljs-keyword">private</span> MockedStatic&lt;IdUtils&gt; idUtilsMock;

    <span class="hljs-meta">@BeforeEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUp</span><span class="hljs-params">()</span> {
        dateUtilsMock = mockStatic(DateUtils.class);
        securityUtilsMock = mockStatic(SecurityUtils.class);
        idUtilsMock = mockStatic(IdUtils.class);
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectById</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Demo</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>();
        <span class="hljs-keyword">when</span>(mapper.selectDemoById(<span class="hljs-string">&quot;1&quot;</span>)).thenReturn(demo);

        <span class="hljs-type">Demo</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> service.selectDemoById(<span class="hljs-string">&quot;1&quot;</span>);
        assertEquals(demo, result);
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectList</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Demo</span> <span class="hljs-variable">param</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>();
        List&lt;Demo&gt; list = Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>());

        <span class="hljs-keyword">when</span>(mapper.selectDemoList(param)).thenReturn(list);

        List&lt;Demo&gt; result = service.selectDemoList(param);
        assertEquals(<span class="hljs-number">1</span>, result.size());
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsert</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Demo</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>();

        <span class="hljs-type">Date</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        dateUtilsMock.<span class="hljs-keyword">when</span>(DateUtils::getNowDate).thenReturn(now);
        securityUtilsMock.<span class="hljs-keyword">when</span>(SecurityUtils::getUserId).thenReturn(<span class="hljs-number">123L</span>);

        <span class="hljs-comment">// Mock UUID</span>
        idUtilsMock.<span class="hljs-keyword">when</span>(IdUtils::simpleUUID).thenReturn(<span class="hljs-string">&quot;UUID123&quot;</span>);

        <span class="hljs-keyword">when</span>(mapper.insertDemo(any())).thenReturn(<span class="hljs-number">1</span>);

        <span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> service.insertDemo(demo);

        assertEquals(<span class="hljs-number">1</span>, r);
        assertEquals(now, demo.getCreateTime());
        assertEquals(<span class="hljs-string">&quot;tester&quot;</span>, demo.getCreateUname());
        assertEquals(<span class="hljs-number">123L</span>, demo.getCreateUid());
        assertEquals(<span class="hljs-string">&quot;UUID123&quot;</span>, demo.getId());

        verify(mapper).insertDemo(demo);
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Demo</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>();

        <span class="hljs-type">Date</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        dateUtilsMock.<span class="hljs-keyword">when</span>(DateUtils::getNowDate).thenReturn(now);
        securityUtilsMock.<span class="hljs-keyword">when</span>(SecurityUtils::getUserId).thenReturn(<span class="hljs-number">123L</span>);

        <span class="hljs-keyword">when</span>(mapper.updateDemo(any())).thenReturn(<span class="hljs-number">1</span>);

        <span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> service.updateDemo(demo);

        assertEquals(<span class="hljs-number">1</span>, r);
        assertEquals(now, demo.getUpdateTime());
        assertEquals(<span class="hljs-string">&quot;tester&quot;</span>, demo.getUpdateUname());
        assertEquals(<span class="hljs-number">123L</span>, demo.getUpdateUid());

        verify(mapper).updateDemo(demo);
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDeleteByIds</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">when</span>(mapper.deleteDemoByIds(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>})).thenReturn(<span class="hljs-number">2</span>);

        <span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> service.deleteDemoByIds(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>});
        assertEquals(<span class="hljs-number">2</span>, r);
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDeleteById</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">when</span>(mapper.deleteDemoById(<span class="hljs-string">&quot;1&quot;</span>)).thenReturn(<span class="hljs-number">1</span>);

        <span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> service.deleteDemoById(<span class="hljs-string">&quot;1&quot;</span>);
        assertEquals(<span class="hljs-number">1</span>, r);
    }
}
</code></pre>
<h2>Mapper示例</h2>
<pre><code class="hljs language-java"><span class="hljs-meta">@ExtendWith(MockitoExtension.class)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoMapperMockTest</span> {

    <span class="hljs-meta">@Mock</span>
    <span class="hljs-keyword">private</span> DemoMapper mapper;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMockSelectById</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Demo</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Demo</span>();
        demo.setId(<span class="hljs-string">&quot;1&quot;</span>);

        <span class="hljs-keyword">when</span>(mapper.selectDemoById(<span class="hljs-string">&quot;1&quot;</span>)).thenReturn(demo);

        <span class="hljs-type">Demo</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> mapper.selectDemoById(<span class="hljs-string">&quot;1&quot;</span>);

        assertEquals(<span class="hljs-string">&quot;1&quot;</span>, result.getId());
    }
}
</code></pre></div></article></div></main><!--$--><!--/$--><!--/$--><script src="/_next/static/chunks/webpack-decb145ea5426c4a.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1901,[\"874\",\"static/chunks/874-9a172bef94aec849.js\",\"39\",\"static/chunks/app/error-65e10ec63dfd4efd.js\"],\"default\"]\n4:I[1295,[],\"\"]\n5:I[6874,[\"874\",\"static/chunks/874-9a172bef94aec849.js\",\"974\",\"static/chunks/app/page-f65e60d494a6c1e6.js\"],\"\"]\n7:I[9665,[],\"OutletBoundary\"]\na:I[4911,[],\"AsyncMetadataOutlet\"]\nc:I[9665,[],\"ViewportBoundary\"]\ne:I[9665,[],\"MetadataBoundary\"]\n10:I[6614,[],\"\"]\n:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/3201109276ebe884.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"_KJTEmgn9NScAS3VpR8Ir\",\"p\":\"\",\"c\":[\"\",\"posts\",\"springboot-unit-test\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"springboot-unit-test\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3201109276ebe884.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"zh\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_f367f3\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$3\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"main\",null,{\"className\":\"min-h-screen p-8 max-w-4xl mx-auto\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold mb-8\",\"children\":\"404 - 页面未找到\"}],[\"$\",\"p\",null,{\"className\":\"mb-4\",\"children\":\"抱歉，您请求的页面不存在。\"}],[\"$\",\"$L5\",null,{\"href\":\"/\",\"className\":\"text-blue-600 hover:underline\",\"children\":\"← 返回首页\"}]]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"springboot-unit-test\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",\"$L9\",[\"$\",\"$La\",null,{\"promise\":\"$@b\"}]]}]]}],{},null,false]},null,false]},null,false]},[[\"$\",\"main\",\"l\",{\"className\":\"min-h-screen p-8 max-w-4xl mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"animate-pulse\",\"children\":[[\"$\",\"div\",null,{\"className\":\"h-8 bg-gray-200 rounded w-1/4 mb-8\"}],[\"$\",\"div\",null,{\"className\":\"space-y-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"h-4 bg-gray-200 rounded w-3/4\"}],[\"$\",\"div\",null,{\"className\":\"h-4 bg-gray-200 rounded w-1/2\"}],[\"$\",\"div\",null,{\"className\":\"h-4 bg-gray-200 rounded w-2/3\"}]]}]]}]}],[],[]],false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"Hq4YiQaZN-hiND0Pc21agv\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:\"$Sreact.suspense\"\n12:I[4911,[],\"AsyncMetadata\"]\nf:[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]}]\n9:null\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"main\",null,{\"className\":\"min-h-screen p-8 bg-white dark:bg-zinc-900\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto\",\"children\":[\"$\",\"article\",null,{\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-12 text-center\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-4xl md:text-5xl font-extrabold tracking-tight text-gray-900 dark:text-white mb-4 leading-tight\",\"children\":\"SpringBoot单元测试示例\"}],[\"$\",\"time\",null,{\"className\":\"text-gray-500 dark:text-gray-400 font-medium\",\"children\":\"2025-12-09\"}]]}],[\"$\",\"div\",null,{\"className\":\"prose prose-lg prose-slate dark:prose-invert mx-auto max-w-none  prose-headings:font-bold prose-headings:tracking-tight prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline prose-img:max-h-96 prose-img:w-auto prose-img:mx-auto prose-img:rounded-lg prose-img:border prose-img:border-gray-200 dark:prose-img:border-zinc-700\",\"children\":\"$L14\"}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"14:[[\"$\",\"h1\",null,{\"children\":\"SpringBoot单元测试\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Maven依赖\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-xml\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"\u003c!-- ========= JUnit5 ========= --\u003e\"}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"dependency\"}],\"\u003e\"]}],\"\\n            \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"groupId\"}],\"\u003e\"]}],\"org.springframework.boot\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"groupId\"}],\"\u003e\"]}],\"\\n            \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"artifactId\"}],\"\u003e\"]}],\"spring-boot-starter-test\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"artifactId\"}],\"\u003e\"]}],\"\\n            \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"scope\"}],\"\u003e\"]}],\"test\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"scope\"}],\"\u003e\"]}],\"\\n            \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"exclusions\"}],\"\u003e\"]}],\"\\n                \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"\u003c!-- 排除 junit4，避免冲突 --\u003e\"}],\"\\n                \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"exclusion\"}],\"\u003e\"]}],\"\\n                    \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"groupId\"}],\"\u003e\"]}],\"junit\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"groupId\"}],\"\u003e\"]}],\"\\n                    \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"artifactId\"}],\"\u003e\"]}],\"junit\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"artifactId\"}],\"\u003e\"]}],\"\\n                \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"exclusion\"}],\"\u003e\"]}],\"\\n            \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"exclusions\"}],\"\u003e\"]}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"dependency\"}],\"\u003e\"]}],\"\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"\u003c!-- ========= Mockito 扩展：Mock 静态方法========= --\u003e\"}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"dependency\"}],\"\u003e\"]}],\"\\n            \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"groupId\"}],\"\u003e\"]}],\"org.mockito\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"groupId\"}],\"\u003e\"]}],\"\\n            \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"artifactId\"}],\"\u003e\"]}],\"mockito-inline\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"artifactId\"}],\"\u003e\"]}],\"\\n            \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"scope\"}],\"\u003e\"]}],\"test\",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"scope\"}],\"\u003e\"]}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-tag\",\"children\":[\"\u003c/\",[\"$\",\"span\",null,{\"className\":\"hljs-name\",\"children\":\"dependency\"}],\"\u003e\"]}],\"\\n\\n\"]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Controller示例\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-java\",\"children\":[\"\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@WebMvcTest(DemoController.class)\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"DemoControllerTest\"}],\" {\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Autowired\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" MockMvc mockMvc;\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@MockBean\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" IDemoService demoService;\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Autowired\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" ObjectMapper objectMapper;\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testGetDetail\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"throws\"}],\" Exception {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"();\\n        demo.setId(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"123\\\"\"}],\");\\n        demo.setName(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"测试台账\\\"\"}],\");\\n\\n        Mockito.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(demoService.selectDemoById(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"123\\\"\"}],\"))\\n                .thenReturn(demo);\\n\\n        mockMvc.perform(get(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"/demo/123\\\"\"}],\"))\\n                .andExpect(status().isOk())\\n                .andExpect(jsonPath(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"$.id\\\"\"}],\").value(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"123\\\"\"}],\"))\\n                .andExpect(jsonPath(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"$.name\\\"\"}],\").value(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"测试台账\\\"\"}],\"));\\n    }\\n\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testAdd\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"throws\"}],\" Exception {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"();\\n        demo.setName(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"新增测试\\\"\"}],\");\\n\\n        Mockito.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(demoService.insertDemo(any()))\\n                .thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\");\\n\\n        mockMvc.perform(post(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"/demo\\\"\"}],\")\\n                .contentType(MediaType.APPLICATION_JSON)\\n                .content(objectMapper.writeValueAsString(demo)))\\n                .andExpect(status().isOk())\\n                .andExpect(jsonPath(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"$.code\\\"\"}],\").value(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"200\"}],\"))\\n                .andExpect(jsonPath(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"$.data\\\"\"}],\").value(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\"));\\n    }\\n\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testEdit\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"throws\"}],\" Exception {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"();\\n        demo.setId(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"123\\\"\"}],\");\\n        demo.setName(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"修改后\\\"\"}],\");\\n\\n        Mockito.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(demoService.updateDemo(any()))\\n                .thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\");\\n\\n        mockMvc.perform(put(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"/demo\\\"\"}],\")\\n                .contentType(MediaType.APPLICATION_JSON)\\n                .content(objectMapper.writeValueAsString(demo)))\\n                .andExpect(status().isOk())\\n                .andExpect(jsonPath(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"$.data\\\"\"}],\").value(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\"));\\n    }\\n\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testDelete\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"throws\"}],\" Exception {\\n        Mockito.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(demoService.deleteDemoById(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"123\\\"\"}],\"))\\n                .thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\");\\n\\n        mockMvc.perform(delete(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"/demo/123\\\"\"}],\"))\\n                .andExpect(status().isOk())\\n                .andExpect(jsonPath(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"$.data\\\"\"}],\").value(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\"));\\n    }\\n}\\n\"]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Service示例\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-java\",\"children\":[\"\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@ExtendWith(MockitoExtension.class)\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"DemoServiceImplTest\"}],\" {\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@InjectMocks\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" DemoServiceImpl service;\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Mock\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" DemoMapper mapper;\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"// mock static\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" MockedStatic\u003cDateUtils\u003e dateUtilsMock;\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" MockedStatic\u003cSecurityUtils\u003e securityUtilsMock;\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" MockedStatic\u003cIdUtils\u003e idUtilsMock;\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@BeforeEach\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"setUp\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" {\\n        dateUtilsMock = mockStatic(DateUtils.class);\\n        securityUtilsMock = mockStatic(SecurityUtils.class);\\n        idUtilsMock = mockStatic(IdUtils.class);\\n    }\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testSelectById\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"();\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(mapper.selectDemoById(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\")).thenReturn(demo);\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"result\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" service.selectDemoById(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\");\\n        assertEquals(demo, result);\\n    }\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testSelectList\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"();\\n        List\u003cDemo\u003e list = Arrays.asList(\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"());\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(mapper.selectDemoList(param)).thenReturn(list);\\n\\n        List\u003cDemo\u003e result = service.selectDemoList(param);\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\", result.size());\\n    }\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testInsert\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"();\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Date\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"now\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Date\"}],\"();\\n        dateUtilsMock.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(DateUtils::getNowDate).thenReturn(now);\\n        securityUtilsMock.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(SecurityUtils::getUserId).thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"123L\"}],\");\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"// Mock UUID\"}],\"\\n        idUtilsMock.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(IdUtils::simpleUUID).thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"UUID123\\\"\"}],\");\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(mapper.insertDemo(any())).thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\");\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" service.insertDemo(demo);\\n\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\", r);\\n        assertEquals(now, demo.getCreateTime());\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"tester\\\"\"}],\", demo.getCreateUname());\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"123L\"}],\", demo.getCreateUid());\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"UUID123\\\"\"}],\", demo.getId());\\n\\n        verify(mapper).insertDemo(demo);\\n    }\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testUpdate\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"();\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Date\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"now\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Date\"}],\"();\\n        dateUtilsMock.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(DateUtils::getNowDate).thenReturn(now);\\n        securityUtilsMock.\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(SecurityUtils::getUserId).thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"123L\"}],\");\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(mapper.updateDemo(any())).thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\");\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" service.updateDemo(demo);\\n\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\", r);\\n        assertEquals(now, demo.getUpdateTime());\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"tester\\\"\"}],\", demo.getUpdateUname());\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"123L\"}],\", demo.getUpdateUid());\\n\\n        verify(mapper).updateDemo(demo);\\n    }\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testDeleteByIds\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(mapper.deleteDemoByIds(\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"String\"}],\"[]{\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\", \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"2\\\"\"}],\"})).thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"2\"}],\");\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" service.deleteDemoByIds(\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"String\"}],\"[]{\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\", \",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"2\\\"\"}],\"});\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"2\"}],\", r);\\n    }\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testDeleteById\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(mapper.deleteDemoById(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\")).thenReturn(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\");\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" service.deleteDemoById(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\");\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\", r);\\n    }\\n}\\n\"]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Mapper示例\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-java\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@ExtendWith(MockitoExtension.class)\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"DemoMapperMockTest\"}],\" {\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Mock\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"private\"}],\" DemoMapper mapper;\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-meta\",\"children\":\"@Test\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"testMockSelectById\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Demo\"}],\"();\\n        demo.setId(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\");\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"when\"}],\"(mapper.selectDemoById(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\")).thenReturn(demo);\\n\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Demo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"result\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" mapper.selectDemoById(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\");\\n\\n        assertEquals(\",[\"$\",\"span\",null,{\"className\":\"hljs-string\",\"children\":\"\\\"1\\\"\"}],\", result.getId());\\n    }\\n}\\n\"]}]}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"b:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"九局下半\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"九局下半的个人博客\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]],\"error\":null,\"digest\":\"$undefined\"}\n13:{\"metadata\":\"$b:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>